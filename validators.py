import re
from rest_framework.serializers import ValidationError

def validate_cpf(value):
    cpf = re.sub(r'[^0-9]', '', str(value))

    if len(cpf) != 11:
        raise ValidationError("O CPF deve conter 11 dígitos.")

    if cpf == cpf[0] * len(cpf):
        raise ValidationError("CPF inválido.")

    cnt = 0
    for i in range(10, 1, -1):
        cnt += int(cpf[10 - i]) * i

    result = (cnt * 10) % 11
    if result == 10 or result == 11:
        result = 0

    if result != int(cpf[9]):
        raise ValidationError("CPF inválido (dígitos verificadores não conferem).")

    cnt = 0
    for i in range(11, 1, -1):
        cnt += int(cpf[11 - i]) * i

    result = (cnt * 10) % 11
    if result == 10 or result == 11:
        result = 0

    if result != int(cpf[10]):
        raise ValidationError("CPF inválido (dígitos verificadores não conferem).")

    return value

cpf_list = [
    '401.853.320-99',
    '275.389.476-04',
    '243.458.203-67',
    '588.853.400-59',
    '275.351.678-29',
    '002.080.287-06',
    '908.089.892-94',
    '716.437.240-37',
    '927.852.118-39',
    '945.975.122-92',
    '904.247.035-64',
    '757.603.730-05',
    '001.648.614-59',
    '131.956.744-40',
    '368.134.737-94',
    '293.948.377-95',
    '017.109.590-10',
    '143.563.465-99',
    '068.827.568-05',
    '573.764.906-71',
    '559.648.023-11',
    '907.622.602-46',
    '465.505.366-69',
    '354.979.362-61',
    '616.819.020-10',
    '994.039.739-94',
    '550.439.238-14',
    '492.102.008-61',
    '340.627.991-03',
    '680.549.022-71',
    '980.015.718-23',
    '613.986.159-43',
    '174.757.604-21',
    '118.574.567-00',
    '036.308.477-06',
    '125.991.856-45',
    '003.281.741-06',
    '750.067.489-90',
    '479.100.807-35',
    '176.099.592-43',
    '029.196.090-17',
    '768.134.726-74',
    '121.439.921-57',
    '403.651.633-76',
    '494.441.182-07',
    '890.756.042-03',
    '347.464.313-45',
    '025.333.823-96',
    '079.041.230-61',
    '866.586.648-54',
    '106.452.892-99',
    '948.180.834-37',
    '041.127.318-33',
    '507.765.390-94',
    '977.290.161-76',
    '948.520.773-55',
    '430.904.529-44',
    '808.034.493-05',
    '088.805.217-05',
    '127.671.825-04',
    '113.806.167-00',
    '961.257.337-93',
    '187.822.295-38',
    '654.587.660-08',
    '222.148.975-69',
    '749.709.617-60',
    '009.814.967-92',
    '015.952.927-13',
    '920.458.572-20',
    '508.116.267-17',
    '222.342.764-20',
    '677.617.634-53',
    '783.126.410-84',
    '238.307.952-97',
    '441.044.072-16',
    '749.114.555-86',
    '847.100.313-98',
    '024.314.728-76',
    '083.226.032-07',
    '084.924.417-04',
    '141.161.369-48',
    '257.694.023-42',
    '484.683.405-02',
    '286.853.925-43',
    '154.413.636-65',
    '261.999.313-00',
    '770.989.057-12',
    '576.104.143-01',
    '519.224.812-46',
    '372.713.103-98',
    '371.671.349-02',
    '382.678.640-83',
    '890.570.832-30',
    '855.609.417-19',
    '252.797.087-71',
    '892.751.439-43',
    '601.980.580-80',
    '183.457.511-72',
    '837.366.668-02',
    '880.571.602-25',
]

for x in cpf_list:
    if x != validate_cpf(x):
        print(f'invalid cpf: {x}')
        exit(1)
